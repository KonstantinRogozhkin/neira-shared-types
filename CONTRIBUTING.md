# Руководство по внесению изменений в `@neira/shared-types`

Этот документ описывает процесс внесения изменений в пакет `@neira/shared-types`.

## Общие принципы

- Все изменения должны быть хорошо протестированы.
- Код должен соответствовать принятым стандартам кодирования.
- Изменения должны быть ясными и хорошо задокументированными.

## Внесение изменений

1.  **Создайте новую ветку:** Отделитесь от ветки `main` для своих изменений.
    ```bash
    git checkout main
    git pull origin main
    git checkout -b feature/your-feature-name
    ```
2.  **Внесите изменения:** Реализуйте необходимые изменения в коде и тестах.
3.  **Обновите документацию:** Если ваши изменения влияют на публичный API или поведение, обновите соответствующую документацию.
4.  **Напишите тесты:** Убедитесь, что все новые функциональные возможности покрыты тестами, а существующие тесты проходят.
5.  **Создайте коммит:** Используйте [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) для описания ваших изменений. Это важно для автоматического версионирования.
    - `feat:` для новых функций.
    - `fix:` для исправления ошибок.
    - `chore:` для рутинных задач, которые не меняют логику приложения (например, обновление зависимостей).
    - `BREAKING CHANGE:` для изменений, нарушающих обратную совместимость (см. ниже).
6.  **Отправьте изменения:** Отправьте свою ветку в удаленный репозиторий.
7.  **Создайте Pull Request:** Откройте Pull Request в ветку `main`.
    - Опишите внесенные изменения и их обоснование.
    - Если изменения являются "breaking changes", явно укажите это в описании PR.
    - Запросите ревью у соответствующих членов команды.

## Обработка "Breaking Changes"

**"Breaking Change"** — это любое изменение, которое нарушает обратную совместимость и может потребовать изменений в существующем коде потребителей пакета `@neira/shared-types`. Примеры "breaking changes" включают, но не ограничиваются:

- Удаление или переименование публичного поля, функции или типа.
- Изменение сигнатуры функции (например, добавление нового обязательного параметра).
- Изменение типа данных существующего поля.
- Изменение поведения существующей функции, которое может привести к неожиданным результатам.

**Процесс для "Breaking Changes":**

1.  **Обсуждение:** Любое "breaking change" должно быть тщательно обсуждено со всеми затронутыми командами (десктоп, мобильной, бэкенд) **до** его реализации. Цель — минимизировать воздействие и найти наиболее оптимальное решение.
2.  **Мажорное обновление версии:** "Breaking change" **обязательно** должно инициировать мажорное обновление версии пакета (например, с `1.x.x` на `2.0.0`). Это сигнализирует потребителям о необходимости ручной проверки и адаптации их кода.
3.  **Четкая документация:** В PR и в истории изменений (`CHANGELOG.md`, если есть) должно быть четко задокументировано, какие изменения являются "breaking changes" и как потребители должны адаптировать свой код.

## Процесс версионирования и публикации

Мы используем [Semantic Versioning](https://semver.org/lang/ru/) для `@neira/shared-types`.

-   **Patch-версии (`X.Y.Z+1`)**: Автоматически публикуются при мерже коммитов типа `fix:` в `main`.
-   **Minor-версии (`X.Y+1.Z`)**: Автоматически публикуются при мерже коммитов типа `feat:` в `main`.
-   **Major-версии (`X+1.Y.Z`)**: **Запускаются вручную** и требуют предварительного обсуждения и согласования с затронутыми командами, как описано в разделе "Обработка "Breaking Changes"". 